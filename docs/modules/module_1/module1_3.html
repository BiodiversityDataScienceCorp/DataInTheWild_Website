<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data In The Wild - 1.3: 2-Dimensional Data and the tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/bdsc-logo-hex.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/bdsc-logo-hex.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Data In The Wild</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../course_materials.html" rel="" target="" aria-current="page">
 <span class="menu-text">Course Materials</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../modules/module_1/module1_1.html">Module 1</a></li><li class="breadcrumb-item"><a href="../../modules/module_1/module1_3.html">1.3: 2-Dimensional Data and the <code>tidyverse</code></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course_materials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Structure</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Module 1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_1/module1_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.1: Introduction to RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_1/module1_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.2: Introduction to Coding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_1/module1_3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">1.3: 2-Dimensional Data and the <code>tidyverse</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Module 2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.1: Introduction to Descriptive Statistics and Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.2: Writing Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.3: Plotting with <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.4: A Visualization Primer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.5: Sick Fish</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.6: Exploring <code>geom</code> Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.7: Wrap-Up</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Module 3</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.1: Leopard Seals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.2: T-Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.3: Comparing (Multiple) Means</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.4: Combining Data (Joins and Binds)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.5: K-Nearest Neighbor</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Module 4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_4/module4_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.1: Roads and Regressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_4/module4_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.2: Multiple Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_4/module4_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Functions to Automate Tasks</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1.3: 2-Dimensional Data and the <code>tidyverse</code></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="learning-outcomes">⊳ Learning Outcomes</h2>
<ul>
<li>Students will be able to load packages.</li>
<li>Students will be able to use some functions of the tidyverse: select, filter, the pipe, mutate, summarize, and group by.</li>
<li>Students will compare and contrast base R and tidyverse methodology for sub-setting data frames.</li>
<li>Students will able to use tidyverse functions to summarize real-world data.</li>
</ul>
</section>
<section id="lecture-code-along" class="level2">
<h2 class="anchored" data-anchor-id="lecture-code-along">⊳ Lecture / Code-along</h2>
<blockquote class="blockquote">
<h3 id="the-tidyverse-what-is-it" class="anchored">The <code>tidyverse</code>: What is it?</h3>
<p>Different programming languages have different syntax (language structure). The <code>tidyverse</code> is a package (more accurately, a set of packages) offered in R that all have similar goals and a unified syntax designed to work particularly well with 2-dimensional data.</p>
<p>Until now, all of the coding we have done is in the original R language, which is often called “base R.” The syntax in the <code>tidyverse</code> is often pretty different from base R. Both are useful, and many people often combine them, which is why we start with base R.</p>
<p>That said, we will be primarily using the <code>tidyverse</code> for the rest of the semester. With the exception of Module 1 Assignment 3, which is exclusively about <code>tidyverse</code>, I will never punish you for using base R in place of <code>tidyverse</code>, as long as you get the same answer!</p>
<h4 id="wait-what-is-a-package" class="anchored">Wait, what is a package??</h4>
<p>Packages are one of the neatest things of working in an open-source environment like R! They contains bits of code (often in the form of functions) that can be reused, making them a core component of reproducible data science. Anyone can develop a package, and there are thousands of them doing all sorts of things.</p>
<h4 id="explore-the-tidyverse" class="anchored">Explore the <code>tidyverse</code></h4>
<p>If you want to learn more about the tidyverse, head over to <a href="www.tidyverse.org">www.tidyverse.org</a> and browse the site. Below is a brief summary of <em>some</em> of the packages I think you might find the most useful.</p>
<ul>
<li><code>tidyr</code>: creating data that is consistent in form/shape</li>
<li><code>dplyr</code>: creating data that is clean, easily wrangled, and summarized</li>
<li><code>ggplot2</code>: publication-worthy plots using The Grammar of Graphics</li>
<li><code>tibble</code>: data frames but better!</li>
<li><code>readr</code>: fast and friendly ways to read data into R</li>
<li><code>stringr</code>: easy manipulation of strings (character data)</li>
<li><code>lubridate</code>: easy manipulation of time and date values</li>
</ul>
<h3 id="practice-with-the-tidyverse" class="anchored">Practice with the <code>tidyverse</code></h3>
<h4 id="download-and-install" class="anchored">Download and install</h4>
<p>In most scenarios, you will need to download a package from the internet onto your computer before you can use it in RStudio. However, with RStudio Cloud, I’ve already done this step for you!</p>
<p>For future reference, though:</p>
<ul>
<li>you usually only need to go through this process once until you update R</li>
<li>we use the function <code>install.packages()</code> to download the package</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download and install the tidyverse package(s)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># To run the line of code below, remove the # in front of the line below and run this chunk:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tidyverse")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<h4 id="load-into-r" class="anchored">Load into R</h4>
<p>Any time we open R/RStudio and want to use functions from the <code>tidyverse</code>, we need to “load” the package. We use the <code>library()</code> function to do this.</p>
<p>When you run this code, you’ll see a message that says “Attaching packages” and “Conflicts.” Don’t panic!</p>
<ul>
<li>The first bit tells us that the core packages have been brought into our R session.</li>
<li>The “conflict” part is a little more complicated but we don’t need to worry too much about it.
<ul>
<li>If you’re curious, though, it is telling us that there are some functions in the <code>tidyverse</code> that have the same names as functions that are automatically installed with R and that the <code>tidyverse</code> versions of those functions will be the ones that get used by default unless we specify otherwise.</li>
</ul></li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the tidyverse (tell RStudio we want to use this package in this session)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<h4 id="climate-data" class="anchored">Climate Data</h4>
<p>To learn about the <code>tidyverse</code> syntax, we’re going to use a real data set on climate change from Berkeley, CA, USA. It outlines temperatures in major cities across the world since 1750.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the data file</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `read_csv() is part of the `tidyverse`</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># It gives us nice options when reading in data</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>climate_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/global_temps.csv"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's take a look at the climate data</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>climate_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 7
   dt         AverageTemperature AverageTemperatureUnce…¹ City  Country Latitude
   &lt;date&gt;                  &lt;dbl&gt;                    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
 1 1849-01-01               26.7                     1.44 Abid… Côte D… 5.63N   
 2 1849-02-01               27.4                     1.36 Abid… Côte D… 5.63N   
 3 1849-03-01               28.1                     1.61 Abid… Côte D… 5.63N   
 4 1849-04-01               26.1                     1.39 Abid… Côte D… 5.63N   
 5 1849-05-01               25.4                     1.2  Abid… Côte D… 5.63N   
 6 1849-06-01               24.8                     1.40 Abid… Côte D… 5.63N   
 7 1849-07-01               24.1                     1.25 Abid… Côte D… 5.63N   
 8 1849-08-01               23.6                     1.26 Abid… Côte D… 5.63N   
 9 1849-09-01               23.7                     1.23 Abid… Côte D… 5.63N   
10 1849-10-01               25.3                     1.18 Abid… Côte D… 5.63N   
# ℹ 239,167 more rows
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>The <code>tidyverse</code> converts 2D data into something called a tibble! For our intents and purposes, it is basically the same as a data frame (and I’ll probably call it a data frame, in reality).</p>
<p>Let’s take a look at our tibble (A.K.A. data frame).</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Explore the data set</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># First 6 rows</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(climate_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  dt         AverageTemperature AverageTemperatureUncer…¹ City  Country Latitude
  &lt;date&gt;                  &lt;dbl&gt;                     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
1 1849-01-01               26.7                      1.44 Abid… Côte D… 5.63N   
2 1849-02-01               27.4                      1.36 Abid… Côte D… 5.63N   
3 1849-03-01               28.1                      1.61 Abid… Côte D… 5.63N   
4 1849-04-01               26.1                      1.39 Abid… Côte D… 5.63N   
5 1849-05-01               25.4                      1.2  Abid… Côte D… 5.63N   
6 1849-06-01               24.8                      1.40 Abid… Côte D… 5.63N   
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Last 6 rows</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(climate_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [239,177 × 7] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ dt                           : Date[1:239177], format: "1849-01-01" "1849-02-01" ...
 $ AverageTemperature           : num [1:239177] 26.7 27.4 28.1 26.1 25.4 ...
 $ AverageTemperatureUncertainty: num [1:239177] 1.44 1.36 1.61 1.39 1.2 ...
 $ City                         : chr [1:239177] "Abidjan" "Abidjan" "Abidjan" "Abidjan" ...
 $ Country                      : chr [1:239177] "Côte D'Ivoire" "Côte D'Ivoire" "Côte D'Ivoire" "Côte D'Ivoire" ...
 $ Latitude                     : chr [1:239177] "5.63N" "5.63N" "5.63N" "5.63N" ...
 $ Longitude                    : chr [1:239177] "3.23W" "3.23W" "3.23W" "3.23W" ...
 - attr(*, "spec")=
  .. cols(
  ..   dt = col_date(format = ""),
  ..   AverageTemperature = col_double(),
  ..   AverageTemperatureUncertainty = col_double(),
  ..   City = col_character(),
  ..   Country = col_character(),
  ..   Latitude = col_character(),
  ..   Longitude = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
<blockquote class="blockquote">
<h3 id="selecting-columns" class="anchored"><code>select()</code>ing columns</h3>
<p>Let’s use our first function, <code>select()</code>. Select allows us to pick out specific columns from our data. You can use names or their position in the data frame.</p>
<p>First, let’s remind ourselves how we would accomplish this in base R.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Column selection in base R</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: climate_df$dt</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2:</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Select multiple columns, in this case the first two</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>climate_df[, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 2
   dt         AverageTemperature
   &lt;date&gt;                  &lt;dbl&gt;
 1 1849-01-01               26.7
 2 1849-02-01               27.4
 3 1849-03-01               28.1
 4 1849-04-01               26.1
 5 1849-05-01               25.4
 6 1849-06-01               24.8
 7 1849-07-01               24.1
 8 1849-08-01               23.6
 9 1849-09-01               23.7
10 1849-10-01               25.3
# ℹ 239,167 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>The <code>select()</code> function does the same thing but with more power (and, in my opinion, more easily). The first argument in the function is the data frame. Any following arguments are the columns we want to select.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First argument is the data frame, then the columns</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(climate_df, dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 1
   dt        
   &lt;date&gt;    
 1 1849-01-01
 2 1849-02-01
 3 1849-03-01
 4 1849-04-01
 5 1849-05-01
 6 1849-06-01
 7 1849-07-01
 8 1849-08-01
 9 1849-09-01
10 1849-10-01
# ℹ 239,167 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple columns:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># City and Country</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(climate_df, dt, City, Country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 3
   dt         City    Country      
   &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;        
 1 1849-01-01 Abidjan Côte D'Ivoire
 2 1849-02-01 Abidjan Côte D'Ivoire
 3 1849-03-01 Abidjan Côte D'Ivoire
 4 1849-04-01 Abidjan Côte D'Ivoire
 5 1849-05-01 Abidjan Côte D'Ivoire
 6 1849-06-01 Abidjan Côte D'Ivoire
 7 1849-07-01 Abidjan Côte D'Ivoire
 8 1849-08-01 Abidjan Côte D'Ivoire
 9 1849-09-01 Abidjan Côte D'Ivoire
10 1849-10-01 Abidjan Côte D'Ivoire
# ℹ 239,167 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All columns until Country</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(climate_df, dt<span class="sc">:</span>Country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 5
   dt         AverageTemperature AverageTemperatureUncertainty City    Country  
   &lt;date&gt;                  &lt;dbl&gt;                         &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;    
 1 1849-01-01               26.7                          1.44 Abidjan Côte D'I…
 2 1849-02-01               27.4                          1.36 Abidjan Côte D'I…
 3 1849-03-01               28.1                          1.61 Abidjan Côte D'I…
 4 1849-04-01               26.1                          1.39 Abidjan Côte D'I…
 5 1849-05-01               25.4                          1.2  Abidjan Côte D'I…
 6 1849-06-01               24.8                          1.40 Abidjan Côte D'I…
 7 1849-07-01               24.1                          1.25 Abidjan Côte D'I…
 8 1849-08-01               23.6                          1.26 Abidjan Côte D'I…
 9 1849-09-01               23.7                          1.23 Abidjan Côte D'I…
10 1849-10-01               25.3                          1.18 Abidjan Côte D'I…
# ℹ 239,167 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All columns except City</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(climate_df, <span class="sc">-</span>City)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 6
   dt         AverageTemperature AverageTemperatureUncertainty Country  Latitude
   &lt;date&gt;                  &lt;dbl&gt;                         &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
 1 1849-01-01               26.7                          1.44 Côte D'… 5.63N   
 2 1849-02-01               27.4                          1.36 Côte D'… 5.63N   
 3 1849-03-01               28.1                          1.61 Côte D'… 5.63N   
 4 1849-04-01               26.1                          1.39 Côte D'… 5.63N   
 5 1849-05-01               25.4                          1.2  Côte D'… 5.63N   
 6 1849-06-01               24.8                          1.40 Côte D'… 5.63N   
 7 1849-07-01               24.1                          1.25 Côte D'… 5.63N   
 8 1849-08-01               23.6                          1.26 Côte D'… 5.63N   
 9 1849-09-01               23.7                          1.23 Côte D'… 5.63N   
10 1849-10-01               25.3                          1.18 Côte D'… 5.63N   
# ℹ 239,167 more rows
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>You might have noticed that we haven’t put any column names in quotations, unlike what we did with selecting columns by name in base R. This is one quirk of the <code>tidyverse</code> to which you will need to pay special attention. We <em>usually</em> will not need to put column names in quotations.</p>
<h4 id="lets-practice" class="anchored">Let’s practice!</h4>
<p>Write a line of code to select the following data from the <code>climate_df</code>: average temperature, latitude and longitude</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select three select columns</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(climate_df, AverageTemperature, Latitude, Longitude)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 3
   AverageTemperature Latitude Longitude
                &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    
 1               26.7 5.63N    3.23W    
 2               27.4 5.63N    3.23W    
 3               28.1 5.63N    3.23W    
 4               26.1 5.63N    3.23W    
 5               25.4 5.63N    3.23W    
 6               24.8 5.63N    3.23W    
 7               24.1 5.63N    3.23W    
 8               23.6 5.63N    3.23W    
 9               23.7 5.63N    3.23W    
10               25.3 5.63N    3.23W    
# ℹ 239,167 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>It is important to remember that the computer interprets everything literally. We need to tell the function the <strong>exact</strong> names of the columns. R will interpret <code>latitude</code> and <code>Latitude</code> as different things; it doesn’t know that they are probably the same!</p>
<h3 id="filtering-rows" class="anchored"><code>filter()</code>ing rows</h3>
<p><code>filter()</code> allows you filter rows by certain conditions. Recall that we did this a bit with base R.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base R</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Select rows where the average temperature was greater than 25</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>climate_df[climate_df<span class="sc">$</span>AverageTemperature <span class="sc">&gt;</span> <span class="dv">25</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 79,690 × 7
   dt         AverageTemperature AverageTemperatureUnce…¹ City  Country Latitude
   &lt;date&gt;                  &lt;dbl&gt;                    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
 1 1849-01-01               26.7                     1.44 Abid… Côte D… 5.63N   
 2 1849-02-01               27.4                     1.36 Abid… Côte D… 5.63N   
 3 1849-03-01               28.1                     1.61 Abid… Côte D… 5.63N   
 4 1849-04-01               26.1                     1.39 Abid… Côte D… 5.63N   
 5 1849-05-01               25.4                     1.2  Abid… Côte D… 5.63N   
 6 1849-10-01               25.3                     1.18 Abid… Côte D… 5.63N   
 7 1849-11-01               26.3                     1.51 Abid… Côte D… 5.63N   
 8 1849-12-01               25.4                     1.84 Abid… Côte D… 5.63N   
 9 1850-01-01               25.8                     1.94 Abid… Côte D… 5.63N   
10 1850-02-01               27.9                     1.43 Abid… Côte D… 5.63N   
# ℹ 79,680 more rows
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>The code above is, in my opinion, a bit unwieldy. Filter feels more intuitive. We still need the double equal signs, though!</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter same content as above, but with `tidyverse`</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(climate_df, AverageTemperature <span class="sc">&gt;</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,688 × 7
   dt         AverageTemperature AverageTemperatureUnce…¹ City  Country Latitude
   &lt;date&gt;                  &lt;dbl&gt;                    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
 1 1849-01-01               26.7                     1.44 Abid… Côte D… 5.63N   
 2 1849-02-01               27.4                     1.36 Abid… Côte D… 5.63N   
 3 1849-03-01               28.1                     1.61 Abid… Côte D… 5.63N   
 4 1849-04-01               26.1                     1.39 Abid… Côte D… 5.63N   
 5 1849-05-01               25.4                     1.2  Abid… Côte D… 5.63N   
 6 1849-10-01               25.3                     1.18 Abid… Côte D… 5.63N   
 7 1849-11-01               26.3                     1.51 Abid… Côte D… 5.63N   
 8 1849-12-01               25.4                     1.84 Abid… Côte D… 5.63N   
 9 1850-01-01               25.8                     1.94 Abid… Côte D… 5.63N   
10 1850-02-01               27.9                     1.43 Abid… Côte D… 5.63N   
# ℹ 68,678 more rows
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># It is easy to write multiple conditions and to chain stuff together:</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Only rows that meet both conditions; you could also use "&amp;" instead of ","</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(climate_df, AverageTemperature <span class="sc">&gt;</span> <span class="dv">25</span>, Country <span class="sc">==</span> <span class="st">"United States"</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 61 × 7
   dt         AverageTemperature AverageTemperatureUnce…¹ City  Country Latitude
   &lt;date&gt;                  &lt;dbl&gt;                    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
 1 1761-07-01               27.8                    2.39  Chic… United… 42.59N  
 2 1868-07-01               25.1                    0.699 Chic… United… 42.59N  
 3 1900-08-01               25.2                    0.49  Chic… United… 42.59N  
 4 1921-07-01               25.6                    0.264 Chic… United… 42.59N  
 5 1947-08-01               26.4                    0.199 Chic… United… 42.59N  
 6 1955-08-01               25.3                    0.153 Chic… United… 42.59N  
 7 1959-08-01               25.1                    0.205 Chic… United… 42.59N  
 8 1988-08-01               25.4                    0.305 Chic… United… 42.59N  
 9 1995-08-01               25.9                    0.283 Chic… United… 42.59N  
10 2012-07-01               25.9                    0.516 Chic… United… 42.59N  
# ℹ 51 more rows
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rows that meet one or the other condition; the "|" symbol means "or"</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(climate_df, AverageTemperature <span class="sc">&gt;</span> <span class="dv">25</span> <span class="sc">|</span> Country <span class="sc">==</span> <span class="st">"United States"</span> ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 77,082 × 7
   dt         AverageTemperature AverageTemperatureUnce…¹ City  Country Latitude
   &lt;date&gt;                  &lt;dbl&gt;                    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
 1 1849-01-01               26.7                     1.44 Abid… Côte D… 5.63N   
 2 1849-02-01               27.4                     1.36 Abid… Côte D… 5.63N   
 3 1849-03-01               28.1                     1.61 Abid… Côte D… 5.63N   
 4 1849-04-01               26.1                     1.39 Abid… Côte D… 5.63N   
 5 1849-05-01               25.4                     1.2  Abid… Côte D… 5.63N   
 6 1849-10-01               25.3                     1.18 Abid… Côte D… 5.63N   
 7 1849-11-01               26.3                     1.51 Abid… Côte D… 5.63N   
 8 1849-12-01               25.4                     1.84 Abid… Côte D… 5.63N   
 9 1850-01-01               25.8                     1.94 Abid… Côte D… 5.63N   
10 1850-02-01               27.9                     1.43 Abid… Côte D… 5.63N   
# ℹ 77,072 more rows
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pulls rows in which the Country column has either "United States" OR "Mexico"</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(climate_df, Country <span class="sc">==</span> <span class="st">"United States"</span> <span class="sc">|</span> Country <span class="sc">==</span> <span class="st">"Mexico"</span>)      </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,600 × 7
   dt         AverageTemperature AverageTemperatureUnce…¹ City  Country Latitude
   &lt;date&gt;                  &lt;dbl&gt;                    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   
 1 1743-11-01               5.44                     2.20 Chic… United… 42.59N  
 2 1743-12-01              NA                       NA    Chic… United… 42.59N  
 3 1744-01-01              NA                       NA    Chic… United… 42.59N  
 4 1744-02-01              NA                       NA    Chic… United… 42.59N  
 5 1744-03-01              NA                       NA    Chic… United… 42.59N  
 6 1744-04-01               8.77                     2.36 Chic… United… 42.59N  
 7 1744-05-01              11.6                      2.10 Chic… United… 42.59N  
 8 1744-06-01              18.0                      1.99 Chic… United… 42.59N  
 9 1744-07-01              21.7                      1.79 Chic… United… 42.59N  
10 1744-08-01              NA                       NA    Chic… United… 42.59N  
# ℹ 10,590 more rows
# ℹ abbreviated name: ¹​AverageTemperatureUncertainty
# ℹ 1 more variable: Longitude &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Worth noting here that we haven't saved any of this</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># To do that, we need to write to a new object</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>us_df <span class="ot">&lt;-</span> <span class="fu">filter</span>(climate_df, AverageTemperature <span class="sc">&gt;</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<h3 id="lets-practice-using-select-and-filter" class="anchored">Let’s practice using <code>select()</code> and <code>filter()</code></h3>
<p>Work with the climate data we’ve been using this class period. Construct a small set of code that does the following:</p>
<ol type="1">
<li>Slims down the full data frame to one that contains the columns dt, AverageTemperature and City. Assign this to an object called <code>slim</code>.</li>
<li>Filters the data for Paris with an average temperature less than 22.</li>
<li>Name this new data frame “cold_paris”</li>
</ol>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Not piped</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># (1)</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>slim <span class="ot">&lt;-</span> <span class="fu">select</span>(climate_df, dt, AverageTemperature, City)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># (2)</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>filtered <span class="ot">&lt;-</span> <span class="fu">filter</span>(slim, City <span class="sc">==</span> <span class="st">"Paris"</span>, AverageTemperature <span class="sc">&lt;</span> <span class="dv">22</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># (3)</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>cold_paris <span class="ot">&lt;-</span> filtered</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<h3 id="the-pipe" class="anchored">The pipe <code>%&gt;%</code></h3>
<p>You can use the pipe operator to chain tidyverse functions together. You can think of the pipe as automatically sending the output from the first line into the next line as the input.</p>
<p>This is helpful for a lot of reasons, including:</p>
<ol type="1">
<li>removing the clutter of creating a lot of intermediate objects in your work space, which reduces the chance of errors caused by using the wrong input object</li>
<li>makes things more human-readable (in addition to computer-readable)</li>
</ol>
<p>The shortcut for typing a pipe is <code>Ctrl</code> + <code>Shift</code> + <code>M</code> (or <code>Cmd</code> + <code>Shift</code> + <code>M</code> on a Mac)</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open climate_df %&gt;% </span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Select City column</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># (Returns City column)</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dt, City)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 2
   dt         City   
   &lt;date&gt;     &lt;chr&gt;  
 1 1849-01-01 Abidjan
 2 1849-02-01 Abidjan
 3 1849-03-01 Abidjan
 4 1849-04-01 Abidjan
 5 1849-05-01 Abidjan
 6 1849-06-01 Abidjan
 7 1849-07-01 Abidjan
 8 1849-08-01 Abidjan
 9 1849-09-01 Abidjan
10 1849-10-01 Abidjan
# ℹ 239,167 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (1) Will store results in cold_paris</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (2) Open climate_df</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>cold_paris <span class="ot">&lt;-</span> climate_df <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (3) Select two columns</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dt, AverageTemperature, City) <span class="sc">%&gt;%</span>   </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (4) Filter to Paris, then filter data where where avg. temp &lt; 22</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(City <span class="sc">==</span> <span class="st">"Paris"</span>, AverageTemperature <span class="sc">&lt;</span> <span class="dv">22</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<h4 id="lets-practice-1" class="anchored">Let’s practice!</h4>
<p>In small groups, use pipes to create a new data frame called <code>warm_nigeria</code> that includes the following:</p>
<ul>
<li>the columns AverageTemperature, City, Country</li>
<li>only rows for the country Nigeria and temperatures that are greater than 30 degrees</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>warm_nigeria <span class="ot">&lt;-</span> climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select columns</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AverageTemperature, City, Country) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Nigeria"</span>, AverageTemperature <span class="sc">&gt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<h3 id="creating-new-variables-with-mutate" class="anchored">Creating new variables with <code>mutate()</code></h3>
<p>Sometimes our data doesn’t have our data in exactly the format we want. For example, we might want our temperature data in Fahrenheit instead of Celsius.</p>
<p>The <code>tidyverse</code> has a function called <code>mutate()</code> that lets us create a new column. Often, we want to apply a function to the entire column or perform some type of calculation, such as converting temp from F to C.</p>
<p>To help us out, here is the equation for converting: <code>Fahrenheit = Celsius * (9/5) + 32</code></p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select temperature column</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dt, AverageTemperature) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a new column for converted temperatures in Fahrenheit</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">AverageTemperature_F =</span> AverageTemperature <span class="sc">*</span> (<span class="dv">9</span><span class="sc">/</span><span class="dv">5</span>) <span class="sc">+</span> <span class="dv">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 239,177 × 3
   dt         AverageTemperature AverageTemperature_F
   &lt;date&gt;                  &lt;dbl&gt;                &lt;dbl&gt;
 1 1849-01-01               26.7                 80.1
 2 1849-02-01               27.4                 81.4
 3 1849-03-01               28.1                 82.6
 4 1849-04-01               26.1                 79.1
 5 1849-05-01               25.4                 77.8
 6 1849-06-01               24.8                 76.7
 7 1849-07-01               24.1                 75.3
 8 1849-08-01               23.6                 74.4
 9 1849-09-01               23.7                 74.6
10 1849-10-01               25.3                 77.5
# ℹ 239,167 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>The first part of the argument in the mutate function (before the <code>=</code>) is the name of the new column we want to create (or, sometime, the name of a column we want to overwrite). After the <code>=</code> is what we want the new column to contain.</p>
<h3 id="understanding-data-through-summarize" class="anchored">Understanding data through <code>summarize()</code></h3>
<p>Like we have talked about in previous classes, some of the best ways for us to understand our data is through what we call summary statistics such as the mean, standard deviation, minimums, maximums, etc.</p>
<p>Fortunately, the <code>tidyverse</code> has a handy-dandy function to make this easy to do with data frames.</p>
<p>The <code>summarize()</code> function creates a new dataframe with columns and values we give it. Similar to <code>mutate()</code>, what is on the left of the <code>=</code> is the name of the new column, and what is on the right of the <code>=</code> is the value(s) to put in the new column.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make new data frame with one column containing: </span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(AverageTemperature),    <span class="co"># average temperature and</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_temp =</span> <span class="fu">sd</span>(AverageTemperature))        <span class="co"># the other the sd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_temp sd_temp
      &lt;dbl&gt;   &lt;dbl&gt;
1        NA      NA</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Wait a second! Those are some weird values!</p>
<p><code>NA</code> is used to represent missing data. So what is happening here? We know that there are numbers to calculate these values.</p>
<p>It is important to note that if any of the values in the column that you are trying to summarize are missing (<code>NA</code>), you might get some wonky values, like you did above.</p>
<p>Fortunately, <code>mean()</code> and <code>sd()</code> and some other functions have an argument to remove the missing values: <code>na.rm = TRUE</code></p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as above, but with NA values omitted from calculation</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_temp =</span> <span class="fu">sd</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_temp sd_temp
      &lt;dbl&gt;   &lt;dbl&gt;
1      18.1    10.0</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Pay attention to where the <code>na.rm = TRUE</code> argument is placed. We are putting it inside the parentheses for the <code>mean()</code> and <code>sd()</code> function, not as an argument in the <code>summarize()</code> function.</p>
<h3 id="split-apply-combine-with-group_by" class="anchored">Split, Apply, Combine with <code>group_by()</code></h3>
<p>One common way we analyze data is through something we call the “split, apply, combine” approach. This means that we:</p>
<ul>
<li><em>split</em> data up into groups via some type of categorization</li>
<li><em>apply</em> some type of analysis to each group independently and</li>
<li><em>combine</em> the data back together</li>
</ul>
<p>The <code>group_by()</code> function lets us do this. It is most often used in combination with <code>mutate()</code> or <code>summarize()</code>.</p>
<p>For example, we can use this method to calculate the mean temperatures of <strong>each</strong> country instead of the overall mean of the entire dataset. In order to do these, we create groups in the data based on the country.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group data by country, then find mean and standard deviation for each</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_temp =</span> <span class="fu">sd</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 × 3
   Country     mean_temp sd_temp
   &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan     14.3     8.65
 2 Angola          23.7     1.98
 3 Australia       15.2     3.70
 4 Bangladesh      25.5     3.88
 5 Brazil          22.8     2.95
 6 Burma           26.7     1.87
 7 Canada           5.11   10.7 
 8 Chile            5.69    4.75
 9 China           11.8    11.4 
10 Colombia        20.9     1.15
# ℹ 39 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<h4 id="lets-practice-2" class="anchored">Let’s practice!</h4>
<p>Practice using the combination of <code>group_by()</code> and <code>summarize()</code> to calculate the minimum (<code>min()</code>) and maximum (<code>max()</code>) average temperatures for each city. Save this data frame as <code>city_min_max</code></p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group data by city, then find minimum and maximum for each</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(City) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">min_temp =</span> <span class="fu">min</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_temp =</span> <span class="fu">max</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 3
   City           min_temp max_temp
   &lt;chr&gt;             &lt;dbl&gt;    &lt;dbl&gt;
 1 Abidjan           22.4      29.9
 2 Addis Abeba       14.5      21.2
 3 Ahmadabad         16.8      35.4
 4 Aleppo             0.67     32.6
 5 Alexandria        10.2      28.8
 6 Ankara            -6.28     26.0
 7 Baghdad            4.24     38.3
 8 Bangalore         20.3      29.7
 9 Bangkok           21.9      31.1
10 Belo Horizonte    15.9      25.2
# ℹ 90 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Already accomplished this task? Try to figure out how you can keep the “Country” column in the final data frame. This is trickier than you might think!</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group data by country, then group by city, then find minimum and maximum for each</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>climate_df <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country, City) <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">min_temp =</span> <span class="fu">min</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_temp =</span> <span class="fu">max</span>(AverageTemperature, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 4
# Groups:   Country [49]
   Country     City           min_temp max_temp
   &lt;chr&gt;       &lt;chr&gt;             &lt;dbl&gt;    &lt;dbl&gt;
 1 Afghanistan Kabul             -2.08     27.6
 2 Angola      Luanda            18.7      27.2
 3 Australia   Melbourne          6.63     23.0
 4 Australia   Sydney            12.0      22.0
 5 Bangladesh  Dhaka             15.1      30.7
 6 Brazil      Belo Horizonte    15.9      25.2
 7 Brazil      Brasília          17.2      25.9
 8 Brazil      Fortaleza         24.3      30.0
 9 Brazil      Rio De Janeiro    18.5      28.8
10 Brazil      Salvador          21.0      28.3
# ℹ 90 more rows</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2024, University of Arizona | Last modified: 7 June 2024</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org/">Made with Quarto</a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/BiodiversityDataScienceCorp/DataInTheWild_Website">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>