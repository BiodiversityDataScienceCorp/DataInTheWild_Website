<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data In The Wild - 2.2: Writing Functions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../../images/bdsc-logo-hex.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/bdsc-logo-hex.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Data In The Wild</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../modules/module_2/module2_1.html">Module 2</a></li><li class="breadcrumb-item"><a href="../../modules/module_2/module2_2.html">2.2: Writing Functions</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/bdsc-logo-hex.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data In The Wild</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/BiodiversityDataScienceCorp" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contact Us</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Module 1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_1/module1_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.1: Introduction to RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_1/module1_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.2: Introduction to Coding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_1/module1_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3: 2-Dimensional Data and the <code>tidyverse</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Module 2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.1: Introduction to Descriptive Statistics and Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2.2: Writing Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.3: Plotting with <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.4: A Visualization Primer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.5: Sick Fish</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.6: Exploring <code>geom</code> Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_2/module2_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.7: Wrap-Up</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Module 3</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.1: Leopard Seals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.2: T-Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.3: Comparing (Multiple) Means</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.4: Combining Data (Joins and Binds)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_3/module3_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.5: K-Nearest Neighbor</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Module 4</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_4/module4_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.1: Roads and Regressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_4/module4_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.2: Multiple Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/module_4/module4_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.3: Using Functions to Automate Tasks</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Resources</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learn More!</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-outcomes" id="toc-learning-outcomes" class="nav-link active" data-scroll-target="#learning-outcomes">Learning Outcomes</a></li>
  <li><a href="#aquaculture-immunology-and-disease" id="toc-aquaculture-immunology-and-disease" class="nav-link" data-scroll-target="#aquaculture-immunology-and-disease">Aquaculture, Immunology, and Disease</a>
  <ul class="collapse">
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration">Data Exploration</a></li>
  <li><a href="#the-data-we-have" id="toc-the-data-we-have" class="nav-link" data-scroll-target="#the-data-we-have">The Data We Have</a></li>
  <li><a href="#discussion-of-the-problem" id="toc-discussion-of-the-problem" class="nav-link" data-scroll-target="#discussion-of-the-problem">Discussion of the problem</a></li>
  </ul></li>
  <li><a href="#custom-functions" id="toc-custom-functions" class="nav-link" data-scroll-target="#custom-functions">Custom Functions</a>
  <ul class="collapse">
  <li><a href="#general-syntax-example" id="toc-general-syntax-example" class="nav-link" data-scroll-target="#general-syntax-example">General Syntax Example</a></li>
  <li><a href="#building-our-custom-function" id="toc-building-our-custom-function" class="nav-link" data-scroll-target="#building-our-custom-function">Building Our Custom Function</a></li>
  <li><a href="#thinking-about-iteration" id="toc-thinking-about-iteration" class="nav-link" data-scroll-target="#thinking-about-iteration">Thinking about Iteration</a></li>
  </ul></li>
  <li><a href="#why-functions" id="toc-why-functions" class="nav-link" data-scroll-target="#why-functions">Why Functions?</a>
  <ul class="collapse">
  <li><a href="#main-ways-to-iterate" id="toc-main-ways-to-iterate" class="nav-link" data-scroll-target="#main-ways-to-iterate">Main Ways to Iterate</a></li>
  <li><a href="#filtering-our-data" id="toc-filtering-our-data" class="nav-link" data-scroll-target="#filtering-our-data">Filtering Our Data</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="module2_2.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2.2: Writing Functions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="learning-outcomes">Learning Outcomes</h2>
<ul>
<li>Students will be able to apply fundamental components of the biology of recirculating aquaculture systems to hypothesize how these components could lead to unhealthy fish.</li>
<li>Students will be able to write custom functions that perform simple tasks.</li>
<li>Students will be able to describe the utility of iteration.</li>
</ul>
</section>
<section id="aquaculture-immunology-and-disease" class="level2">
<h2 class="anchored" data-anchor-id="aquaculture-immunology-and-disease">Aquaculture, Immunology, and Disease</h2>
<p>What is aquaculture anyway, and how might it contribute to disease? Here’s a link to the <a href="https://docs.google.com/presentation/d/1CciKgqhu9WhS3x-YaTgEF15B0TefFhqevufThvmEfSk/edit?usp=sharing">presentation</a>.</p>
<section id="data-exploration" class="level3">
<h3 class="anchored" data-anchor-id="data-exploration">Data Exploration</h3>
<p>Given the correlation we found earlier, it does seem like the fish are our likely culprit.</p>
<p>Since we’ve narrowed down the issue, we should ask our aquaculture specialists to provide us with some data about the tanks.</p>
<section id="group-brainstorm" class="level4">
<h4 class="anchored" data-anchor-id="group-brainstorm">Group Brainstorm</h4>
<p>Based on what we know about aquaculture systems, what types of data should we ask for to get to the bottom of this issue? Spend about 3 minutes brainstorming with your group and be ready to report back.</p>
</section>
</section>
<section id="the-data-we-have" class="level3">
<h3 class="anchored" data-anchor-id="the-data-we-have">The Data We Have</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the tidyverse</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the data</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>tank_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/fish_tank_data.csv"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at the data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(tank_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,000
Columns: 7
$ tank_id        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, …
$ species        &lt;chr&gt; "tilapia", "tilapia", "tilapia", "tilapia", "tilapia", …
$ avg_daily_temp &lt;dbl&gt; 23.57285, 23.75280, 23.07280, 23.74601, 24.40522, 23.25…
$ num_fish       &lt;dbl&gt; 105, 102, 109, 98, 103, 97, 101, 99, 102, 95, 100, 102,…
$ day_length     &lt;dbl&gt; 10, 10, 10, 12, 10, 10, 11, 10, 9, 10, 10, 12, 11, 11, …
$ tank_volume    &lt;dbl&gt; 400.7182, 399.4300, 399.4878, 400.8874, 399.8796, 399.8…
$ size_day_30    &lt;dbl&gt; 2779.726, 2785.846, 2781.342, 2784.785, 2786.340, 2782.…</code></pre>
</div>
</div>
</section>
<section id="discussion-of-the-problem" class="level3">
<h3 class="anchored" data-anchor-id="discussion-of-the-problem">Discussion of the problem</h3>
<p>Trout are a cold-water species whereas tilapia are a warm-water species. After doing some reading, we’ve come up with some critical values for each species.</p>
<p>Water temperatures below 59º F for trout and below 75º F for tilapia are critically low temperatures and can result in suppression of the immune system.</p>
<p>Great, we now know what the critical temperature cutoffs are for both species — but there’s a problem. The cut-off temperatures that we have are in Fahrenheit but the temperature values in our data frame are in Celsius.</p>
<p>Our goal with this data is to ascertain if any of the tanks are below the critical temperature. Before we can do this, though, we need to convert tank temperatures from Celsius to Fahrenheit. Luckily for us, we’ve already done this before! (Hint: remember the <code>mutate()</code> function?).</p>
<p>Now, we are going to run through a slightly different way to accomplish this task. It still involves <code>mutate()</code>, but we need to take some additional steps first before we use it.</p>
</section>
</section>
<section id="custom-functions" class="level2">
<h2 class="anchored" data-anchor-id="custom-functions">Custom Functions</h2>
<p>We’ve already used functions a lot in this class, and it turns out that we can write our own functions to perform specific tasks.</p>
<p>This has lot of varied uses and can be very powerful. The key takeaway here, though, is that we can write a function that converts Celsius to Fahrenheit and apply it to our entire data set in a few lines of code.</p>
<section id="general-syntax-example" class="level3">
<h3 class="anchored" data-anchor-id="general-syntax-example">General Syntax Example</h3>
<p>Making a function involves creating local variables that act as a stand-in for the values you want to use later on. In the case below, our local variables are <code>x</code>, <code>y</code>, and <code>z</code>. You can see that they are local because they only circulate within the function and are not being pulled in from outside. However, once we are done defining our function we can assign values to the input variables (in this case, <code>x</code> and <code>y</code>) that the function will do its magic with. You can see this in the example chunk below, where <code>x = 2</code> and <code>y = 4</code>. All manipulations done with the input variables are contained between the curly brackets ( <code>{ }</code> ), and of course, we signify the start a function with <code>function()</code>.</p>
<p>Function syntax follows the structure in the code chunk below, which can be viewed as:</p>
<p><code>name_of_new_function &lt;- function(input1, input2){</code></p>
<p><code>what do you want to do with your input variables? (add, subtract, etc.)</code></p>
<p><code>output &lt;- input1 + input2</code></p>
<p><code>return(output)</code></p>
<p><code>}</code></p>
<p>And we can see it in action here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># General syntax</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>new_sum <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y){</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(z)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examples when using the new function</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">new_sum</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">new_sum</span>(<span class="dv">2</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">new_sum</span>(<span class="dv">7</span>, <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26</code></pre>
</div>
</div>
</section>
<section id="building-our-custom-function" class="level3">
<h3 class="anchored" data-anchor-id="building-our-custom-function">Building Our Custom Function</h3>
<p>In your groups, build a custom function called <code>c_to_f()</code> that converts a single value of Celsius to Fahrenheit. Remember, the equation is <code>Celsius = Fahrenheit * (9/5) + 32</code>. Instead of two arguments like we have above (<code>x</code>, <code>y</code>), this function will only require one input value (<code>c</code>).</p>
<p>Be prepared to show your code and run some test values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>c_to_f <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">c =</span> <span class="cn">NULL</span>){</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> (c <span class="sc">*</span> (<span class="dv">9</span><span class="sc">/</span><span class="dv">5</span>)) <span class="sc">+</span> <span class="dv">32</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(f)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">c_to_f</span>(<span class="at">c =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 104</code></pre>
</div>
</div>
</section>
<section id="thinking-about-iteration" class="level3">
<h3 class="anchored" data-anchor-id="thinking-about-iteration">Thinking about Iteration</h3>
<p>So, we have a great function that we can use to convert a Celsius value to Fahrenheit, but how do we apply that to <em>every</em> value in the temperature column, not just one? We’ve built the function for one value, not for a whole vector of values…</p>
<p>This is where <code>mutate()</code> comes in! As we’ve seen in the past, <code>mutate()</code> applies whatever function or mathematical formula we’ve given to it to each value in the column. It essentially is going row by row: applying the function or formula to one row, returning the new value in a new column, then moving to the next row to do the same.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's first demonstrate applying our new function to a vector</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c_to_f</span>(tank_data<span class="sc">$</span>avg_daily_temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 74.43113 74.75503 73.53104 74.74281 75.92940 73.86383 74.31040 76.83799
   [9] 74.61511 74.87889 75.97796 75.12147 73.19913 73.29417 73.93870 74.66364
  [17] 74.83470 75.66626 73.70134 75.70409 76.46928 74.38196 75.24622 75.11160
  [25] 74.12701 74.80457 75.34147 74.86631 76.01130 75.44187 74.71827 75.01918
  [33] 76.51237 76.51730 73.27106 73.85835 74.27350 75.86871 73.20866 74.63055
  [41] 75.45388 73.82945 74.25658 74.59991 72.82957 75.27582 75.93890 74.83474
  [49] 74.41354 73.97254 75.02370 74.11599 76.44499 74.47102 75.26821 76.40062
  [57] 75.50111 75.18067 76.86133 75.24810 74.88691 75.63106 75.25761 73.64460
  [65] 75.89521 74.11780 75.15073 76.32487 74.95296 74.79653 76.51101 75.83362
  [73] 75.55690 75.14052 74.82020 75.08606 75.52449 76.95815 75.80831 73.10074
  [81] 75.02855 76.22341 75.64616 75.23696 75.17291 74.70379 74.43949 75.45942
  [89] 75.49829 74.67938 74.98023 73.80162 74.95824 74.66393 76.18906 74.98713
  [97] 74.83729 76.66777 75.90083 74.58555 76.30435 76.06749 75.01741 74.85544
 [105] 74.43440 75.31092 74.50235 74.78281 74.95587 75.59466 74.66381 74.97921
 [113] 73.58013 75.04360 73.21218 74.02326 73.64192 75.28364 74.45243 73.64938
 [121] 75.93994 74.58181 76.25739 75.00178 74.22845 76.31685 74.41358 74.44657
 [129] 74.83803 74.55838 74.66919 75.35266 75.08914 74.66152 74.05380 74.39329
 [137] 76.60488 75.98699 74.62135 76.51778 73.53161 74.85214 75.05827 74.05406
 [145] 74.46643 75.30342 75.05014 74.63223 75.44543 72.75165 73.48342 73.80455
 [153] 73.50949 74.64755 75.00175 74.57649 74.11708 73.87874 75.27300 75.28975
 [161] 74.98249 75.48612 76.41550 75.16506 74.98727 74.96898 74.74179 74.24449
 [169] 75.27430 73.67490 75.65908 75.04681 76.79113 75.26938 74.79354 74.01127
 [177] 74.76849 75.36104 73.74682 74.30743 75.67318 75.99384 75.66748 74.10130
 [185] 76.20572 75.83375 74.37115 73.50744 73.73622 74.50636 73.27653 76.26933
 [193] 75.71124 75.86047 75.73344 73.18854 74.28251 74.65673 74.65480 75.40234
 [201] 73.87881 76.52272 75.22239 75.24770 75.48636 76.14890 76.46642 74.57311
 [209] 74.99249 76.16651 75.82809 75.16704 73.94868 76.90079 74.84575 74.34058
 [217] 75.61323 74.84086 75.29631 74.81182 75.49209 76.00486 76.05246 75.87944
 [225] 74.79180 77.26703 73.58652 74.54782 76.88003 76.32634 74.80925 74.98680
 [233] 73.75446 76.27250 75.27961 74.37445 74.76251 73.88835 74.85354 75.71155
 [241] 73.60666 75.28570 76.18128 73.27245 74.02696 74.37579 74.73682 74.73227
 [249] 73.37703 74.59072 74.23939 74.41314 74.90766 74.66029 75.12877 75.62673
 [257] 76.32683 75.72618 74.85168 76.70432 76.28197 74.71700 75.30343 75.91907
 [265] 75.24439 75.65435 75.19472 73.92471 73.60380 75.20492 75.66565 75.39755
 [273] 75.25493 75.77523 75.66162 73.38134 74.86907 75.68101 73.85461 74.98361
 [281] 75.46433 75.10175 76.63125 75.85701 75.17118 74.53800 75.81667 75.88907
 [289] 74.43176 74.44114 74.48623 74.91623 74.28739 75.51695 75.94118 76.48571
 [297] 76.14303 74.66342 74.97728 74.53391 73.52488 73.58812 76.11815 75.46769
 [305] 75.19182 74.13072 76.31003 75.30696 75.02037 75.74875 75.73139 75.77816
 [313] 74.34561 73.84045 75.24158 75.76953 73.13234 74.61631 74.81177 75.26779
 [321] 74.23635 73.82120 76.31054 74.35616 76.07601 73.95509 74.05772 74.22910
 [329] 75.43011 73.42268 76.79148 75.21833 74.80185 73.36899 73.14975 75.79115
 [337] 74.61919 75.98506 73.42636 75.22286 73.99257 75.46905 73.89113 75.37155
 [345] 74.05730 74.66263 74.66438 74.18706 74.49813 74.32892 74.23642 74.67756
 [353] 75.04411 74.30414 74.70724 75.08641 75.71841 75.51808 74.93100 75.81793
 [361] 74.78730 74.63517 74.97826 75.51747 74.52114 75.12071 78.13482 75.46619
 [369] 74.46580 74.73910 75.67454 75.50536 75.52796 74.30964 76.21489 74.70730
 [377] 76.88057 74.58457 74.43064 75.03877 74.36608 75.06382 75.98336 74.87293
 [385] 74.22894 75.06329 74.27155 75.68821 74.24253 73.94639 73.49113 75.11725
 [393] 75.85721 76.07618 75.18791 76.24006 75.62590 75.02484 74.42331 72.60027
 [401] 73.52044 76.51052 74.28500 75.40433 73.90875 76.99178 76.35279 75.41119
 [409] 74.13315 75.19382 75.50201 74.48111 75.90511 75.11015 75.25285 74.99648
 [417] 74.47208 75.85869 74.68220 73.34307 75.04739 76.44738 75.31309 75.52913
 [425] 76.26223 75.73930 76.33215 73.74962 73.33994 74.70288 74.19174 75.01108
 [433] 74.63574 74.76168 74.78990 74.75733 73.00951 74.26312 76.02842 74.63533
 [441] 75.14596 74.96193 74.11402 74.59574 76.09305 74.53926 74.74604 74.40459
 [449] 77.27062 74.78709 74.36770 72.54340 75.09833 74.88731 73.50395 74.78807
 [457] 75.05173 75.12390 74.90934 75.99915 74.33275 74.38525 74.10922 73.42221
 [465] 76.64918 74.47975 75.12581 75.25714 75.35792 74.69494 75.62008 73.53747
 [473] 75.71740 74.33907 75.53669 73.35504 74.45043 76.12163 76.03898 75.61239
 [481] 74.80586 73.71626 73.48871 74.12853 73.84396 77.17008 76.43512 73.98444
 [489] 76.04977 74.46583 76.01115 73.91292 75.92073 74.29250 74.63153 75.00484
 [497] 74.52828 74.66825 75.29207 74.77686 76.19662 75.30999 75.69891 73.15895
 [505] 73.85873 74.07277 75.41135 74.74135 74.26356 75.63118 75.28181 74.17680
 [513] 74.68805 76.18352 74.81882 75.24053 75.04616 76.11425 75.36269 75.19598
 [521] 74.37596 76.61887 73.65574 75.51871 74.48345 76.03400 75.57605 75.55502
 [529] 75.65533 76.53720 75.03611 73.88219 74.41748 74.08832 76.36027 74.93291
 [537] 75.66116 75.06712 74.36560 75.25447 75.49461 76.83779 75.88841 75.24546
 [545] 73.47890 73.74035 74.00327 76.70369 74.94458 76.21075 74.29925 75.06979
 [553] 76.01745 75.82861 75.54548 75.42884 73.98611 75.54789 76.09116 75.88274
 [561] 76.46166 74.96008 75.43254 74.86664 74.29002 74.87314 74.85198 76.87914
 [569] 74.06174 75.85227 75.67760 74.07233 75.48141 74.66367 74.93047 74.96150
 [577] 74.49903 73.48692 73.68900 75.15058 75.11194 74.39278 74.14565 75.62441
 [585] 74.94064 75.99647 74.85537 76.45970 75.82955 75.49968 75.89981 74.64502
 [593] 74.74139 75.52825 75.47099 74.43561 75.00259 76.13283 75.72467 74.57316
 [601] 75.02189 73.51909 75.54535 74.09301 73.49334 75.41178 74.95289 74.11120
 [609] 74.07679 74.21184 74.83747 74.92889 74.04358 74.96736 74.76160 73.12468
 [617] 75.29538 75.22185 75.34399 75.06791 76.37536 74.09531 73.46627 75.90204
 [625] 76.25114 75.31286 77.02115 74.14008 75.03220 75.24348 73.99906 74.97442
 [633] 75.66312 73.25093 75.45421 74.73571 73.21914 74.86915 75.43225 74.53833
 [641] 75.61747 74.80382 76.44066 74.81603 76.04032 75.44944 74.26456 75.84708
 [649] 74.68048 75.09555 73.92737 75.45199 74.56045 75.22312 75.03210 75.12464
 [657] 75.52245 76.29832 74.50342 74.45557 74.70536 75.87068 74.94073 75.33082
 [665] 74.72678 75.03815 75.78069 74.17345 75.36708 75.10770 74.96127 77.29781
 [673] 76.23836 73.81312 74.40241 75.18181 74.61472 74.84399 74.73681 74.81869
 [681] 75.35093 74.39910 73.61451 74.36612 73.33844 75.57199 73.31930 74.69243
 [689] 75.09463 75.37939 76.62129 75.74483 75.38812 73.98151 75.04188 75.28739
 [697] 75.18751 76.01130 74.61666 74.21020 75.79813 76.06483 75.31910 74.31577
 [705] 74.67929 76.07411 73.80797 74.82510 73.71311 75.91244 75.04805 76.57705
 [713] 75.72923 73.86751 75.28411 74.13344 75.53956 73.85239 73.03549 73.49739
 [721] 76.82092 74.90142 74.57528 75.56377 75.34453 75.50219 76.00495 74.77230
 [729] 75.33662 74.45439 74.17300 74.23845 73.32387 73.52121 76.13298 73.78813
 [737] 75.41284 76.59846 75.35748 74.94102 74.53078 75.59105 74.86910 74.57358
 [745] 75.53979 75.67722 74.04404 75.08682 74.43477 73.90495 58.71655 58.60596
 [753] 59.81279 58.92998 58.74580 61.62783 58.89574 57.72173 58.00128 58.23492
 [761] 57.46868 58.14439 58.33435 59.21383 58.26875 59.21490 59.93676 57.84037
 [769] 58.93440 57.99766 58.40757 58.86463 58.19380 58.86269 58.96014 59.35988
 [777] 58.73265 58.99126 58.88987 58.61232 59.43563 57.55058 58.64003 59.29693
 [785] 59.85673 58.43464 58.53746 59.59014 57.99131 60.11249 59.61312 58.65781
 [793] 58.48004 57.33794 59.90118 55.96181 58.86370 59.51051 59.25745 59.36329
 [801] 60.21101 58.21819 60.41045 59.13623 57.49084 61.21628 58.54168 60.98868
 [809] 59.25941 59.30273 58.45916 58.29524 59.36254 58.77167 59.30608 58.18048
 [817] 58.51745 60.10645 57.31615 59.57920 59.00116 59.34116 58.70359 58.77237
 [825] 58.91715 58.88182 59.58683 59.02189 60.04784 59.61932 59.35197 60.69102
 [833] 59.12942 59.34041 59.78739 58.66497 60.09224 58.85611 59.29852 60.08068
 [841] 59.05809 58.44424 59.68582 59.47273 59.26000 59.36474 60.53905 59.03931
 [849] 58.38699 59.14683 60.18130 57.86961 58.60957 58.99026 59.13557 58.51197
 [857] 59.14811 59.47670 57.76631 58.73476 59.12640 60.01568 58.48686 57.62616
 [865] 59.13953 58.66865 58.50021 59.29785 57.51375 61.24982 59.90547 58.47528
 [873] 57.63368 58.72005 58.95607 58.73648 60.54165 57.87001 59.11123 59.45932
 [881] 61.56960 58.72222 58.80271 58.80800 58.79589 59.49097 59.32121 58.48496
 [889] 58.10383 58.12429 59.86692 59.20175 59.21730 58.58847 60.27672 58.10896
 [897] 58.29106 59.94312 59.80183 58.42179 59.85023 58.97875 59.70343 59.56826
 [905] 58.55075 58.60945 59.08787 58.03444 57.76502 59.16565 57.11930 58.16243
 [913] 60.70687 58.89522 58.23583 60.20542 58.14132 58.27318 59.95025 57.69363
 [921] 58.26243 59.61055 58.53237 58.24523 59.25394 59.63806 57.57931 58.95890
 [929] 58.91506 60.05179 60.07972 58.30900 58.69114 60.87270 59.38890 60.01367
 [937] 56.88199 57.53978 58.52811 59.30322 60.71852 60.31373 57.77659 59.33987
 [945] 58.45096 58.57272 59.70338 60.33623 58.94100 59.03894 59.13207 59.44900
 [953] 59.19860 58.80944 58.32800 58.39747 60.27306 59.47031 58.28749 57.83506
 [961] 60.66958 58.08557 58.57839 58.88083 58.54565 58.98934 59.74796 59.64448
 [969] 57.56594 59.74780 57.28264 58.39450 60.28522 59.68049 58.99770 57.25823
 [977] 58.25759 59.30419 59.18225 57.00076 59.96050 57.83463 59.84659 58.17613
 [985] 59.47178 59.16409 59.76432 58.55604 58.55329 58.18867 58.57248 60.31412
 [993] 59.65095 58.74366 60.13083 60.32541 58.37594 60.20369 60.00230 59.09448</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mutate is basically doing the same thing</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>tank_data <span class="ot">&lt;-</span> tank_data <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_daily_temp_F =</span> <span class="fu">c_to_f</span>(avg_daily_temp))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View mutate() results</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>tank_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 8
   tank_id species avg_daily_temp num_fish day_length tank_volume size_day_30
     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
 1       1 tilapia           23.6      105         10        401.       2780.
 2       2 tilapia           23.8      102         10        399.       2786.
 3       3 tilapia           23.1      109         10        399.       2781.
 4       4 tilapia           23.7       98         12        401.       2785.
 5       5 tilapia           24.4      103         10        400.       2786.
 6       6 tilapia           23.3       97         10        400.       2783.
 7       7 tilapia           23.5      101         11        400.       2784.
 8       8 tilapia           24.9       99         10        401.       2789.
 9       9 tilapia           23.7      102          9        400.       2788.
10      10 tilapia           23.8       95         10        399.       2785.
# ℹ 990 more rows
# ℹ 1 more variable: avg_daily_temp_F &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="why-functions" class="level2">
<h2 class="anchored" data-anchor-id="why-functions">Why Functions?</h2>
<p>We can easily fit the equation for converting from Celsius to Fahrenheit into a mutate call. We certainly didn’t need to write our own function to do it. So why did we learn how to do that?</p>
<section id="main-ways-to-iterate" class="level3">
<h3 class="anchored" data-anchor-id="main-ways-to-iterate">Main Ways to Iterate</h3>
<p>There are many different approaches to iterating in R, especially because we are typically working with vectorized data (columns in data frames). We will talk about the other options down the road. Today, we used #3, the <code>mutate()</code> function from the <code>tidyverse</code>.</p>
<ol type="1">
<li><code>for</code> loops</li>
<li><code>apply</code>/<code>map</code> functions</li>
<li>using <code>dplyr</code> (<code>tidyverse</code>) functions</li>
</ol>
</section>
<section id="filtering-our-data" class="level3">
<h3 class="anchored" data-anchor-id="filtering-our-data">Filtering Our Data</h3>
<p>Thankfully, we’ve solved our first problem! However, we haven’t yet answered the original question.</p>
<p><em>Are any tanks are below the temperature cutoffs for each species? If so, how many?</em></p>
<p>Let’s tackle that question:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count() is a new function for most of us</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># It does what it sounds like -- count the number of results</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of tanks below temperature cutoff for TILAPIA</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>tank_data <span class="sc">%&gt;%</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"tilapia"</span> <span class="sc">&amp;</span> avg_daily_temp_F <span class="sc">&lt;</span> <span class="dv">75</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   383</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for TROUT</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>tank_data <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"trout"</span> <span class="sc">&amp;</span> avg_daily_temp_F <span class="sc">&lt;</span> <span class="dv">59</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   131</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's introduce some additional syntax: "&amp;" and "|"</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we can get counts for both fish species in one go!</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>tank_data <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"tilapia"</span> <span class="sc">&amp;</span> avg_daily_temp_F <span class="sc">&lt;</span> <span class="dv">75</span> <span class="sc">|</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>         species <span class="sc">==</span> <span class="st">"trout"</span> <span class="sc">&amp;</span> avg_daily_temp_F <span class="sc">&lt;</span> <span class="dv">59</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="co"># Another way to get the count is summarize() with n()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  species     n
  &lt;chr&gt;   &lt;int&gt;
1 tilapia   383
2 trout     131</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2024, University of Arizona | Last modified: 12 June 2024</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org/">Made with Quarto</a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/BiodiversityDataScienceCorp/DataInTheWild_Website">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>